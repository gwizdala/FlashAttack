<!DOCTYPE html>
<html>
<head>

<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="Selection.css">
</head>

<body style="margin: 0;">
  <table width="100%">
    <tr>
    <td><p id="winLose"></p></td>
    </tr>
    <tr>
      <td>
        <canvas width="inherit" id="xpBar"></canvas>
      </td>
    </tr>
    <tr>
      <td>
        <p id="totalTimeToAnswer" class="DeckTable"></p>
      </td>
    </tr>
    <tr>
      <td>
        <p id="averageTimePerAnswer"  class="DeckTable"></p>
      </td>
    </tr>
    <tr>
      <td align="center"> <input id="mainMenu" type="button" class="a" value="Main Menu"></td>
    </tr>
  </table>

  <script text/javascript>
  // Save data to sessionStorage
  document.getElementById("mainMenu").addEventListener("click",function(){
     window.location= "index.html";
  });
  </script>

  <script text/javascript>
    var w = document.getElementById("winLose");
    var totTime = document.getElementById("totalTimeToAnswer");
    var avgTime = document.getElementById("averageTimePerAnswer")
      if(sessionStorage.getItem("winCondition") == "true") {
        w.innerHTML = "YOU WIN!";
        w.className = "WinClass";
        totTime.innerHTML = "Total Time: " + sessionStorage.getItem("totalTime") + "s";
        //This is technically incorrect, since this must hangle any size #cards. This is only 5 for the prototype
        avgTime.innerHTML = "Average Time Per Answer: " + sessionStorage.getItem("totalTime")/5 + "s";
        var audio = new Audio('Sounds/tada.mp3');
        audio.play();
      }
      else {
        w.innerHTML = "YOU LOST";
        w.className = "LossClass";
        totTime.innerHTML = "Total Time: " + sessionStorage.getItem("totalTime") + "s";
        avgTime.innerHTML = "Average Time Per Answer: DID NOT COMPLETE";
        var audio = new Audio('Sounds/failhorn.mp3');
        audio.play();
      }
  </script>

  <script>
    var canvas = document.querySelector('canvas');
    var ctx = canvas.getContext("2d");
    parentSize = canvas.parentNode.getBoundingClientRect();
    canvas.width  = parentSize.width;
    canvas.height = parentSize.height;
    if(sessionStorage.getItem("winCondition") == "true") {
      ctx.beginPath();
      ctx.fillStyle = "green";
      ctx.rect(10, canvas.height/2, canvas.width - 20, 50);
      ctx.fill();
    }
    else{
      ctx.beginPath();
      ctx.fillStyle = "red";
      ctx.rect(10, canvas.height/2, canvas.width - 10, 50);
      ctx.fill();
    }
  </script>

</body>
</html>
